<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>#ESCAPE IR CONTROLLER</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="wrap">
      <h1>#ESCAPE IR CONTROLLER</h1>

      <div class="panel">
        <div class="row">
          <div>
            <label class="small">Base URL</label>
            <input id="baseUrl" type="text" placeholder="http://192.168.0.20" />
          </div>
          <div>
            <label class="small">API Key</label>
            <input id="authToken" type="password" placeholder="key for ?key=" />
          </div>
          <div class="row" style="align-self: flex-end">
            <button id="saveBtn" class="btn">Save</button>
            <button id="pingBtn" class="btn">Ping</button>
            <div class="status">
              <span id="dot"></span><span id="statusText">Not connected</span>
            </div>
          </div>
        </div>
      </div>

      <div class="panel actions">
        <div class="group-title">Power</div>
        <div class="row">
          <button id="btnPowerOn" class="btn ok">On</button>
          <button id="btnPowerOff" class="btn bad">Off</button>
          <button id="btnWhite" class="btn">White</button>
        </div>
      </div>

      <div class="panel actions">
        <div class="group-title">Brightness (hold to repeat)</div>
        <div class="row">
          <button id="btnDim" class="btn">–</button>
          <button id="btnBright" class="btn">+</button>
          <div id="preview">—</div>
        </div>
      </div>

      <div class="panel">
        <div class="group-title">Modes</div>
        <div class="row">
          <button class="btn mode" data-name="flash">Flash</button>
          <button class="btn mode" data-name="strobe">Strobe</button>
          <button class="btn mode" data-name="fade">Fade</button>
          <button class="btn mode" data-name="smooth">Smooth</button>
        </div>
      </div>

      <!-- Colors -->
      <div class="panel">
        <div class="group-title">Colors</div>

        <div class="row" style="margin-bottom: 8px; gap: 0.75rem; align-items: center">
          <label style="display: flex; gap: 0.5rem; align-items: center; cursor: pointer">
            <input id="addToCycle" type="checkbox" />
            <span class="small">Add to Cycle (don’t send immediately)</span>
          </label>
        </div>

        <div id="swatches" class="grid"></div>
        <div class="footer-note" style="margin-top: 10px"></div>
      </div>

      <!-- Cycle -->
      <div class="panel">
        <div class="group-title">Cycle Playlist</div>
        <div class="row" style="gap: 0.75rem; flex-wrap: wrap; align-items: center">
          <label class="small" for="cycleInterval">Interval (seconds)</label>
          <input
            id="cycleInterval"
            type="number"
            min="0.5"
            step="0.5"
            value="3"
            style="width: 90px"
          />
          <button id="cycleStart" class="btn ok">Start</button>
          <button id="cycleStop" class="btn bad" disabled>Stop</button>
          <button id="cycleClear" class="btn">Clear</button>
        </div>
        <div id="cycleList" class="row" style="gap: 0.5rem; flex-wrap: wrap; margin-top: 0.75rem">
          <span class="muted">No colours queued.</span>
        </div>

        <!-- Inside your Cycle panel, under the buttons/interval row -->
        <div
          class="row"
          style="gap: 0.75rem; flex-wrap: wrap; align-items: center; margin-top: 0.5rem"
        >
          <label style="display: flex; gap: 0.5rem; align-items: center; cursor: pointer">
            <input id="dimToggle" type="checkbox" />
            <span class="small">Dim between colours</span>
          </label>

          <label class="small" for="dimTarget" style="margin-left: 0.5rem">Dip to (%)</label>
          <input
            id="dimTarget"
            type="number"
            min="56"
            max="100"
            step="1"
            value="70"
            style="width: 80px"
          />

          <label class="small" for="dimDelay" style="margin-left: 0.5rem">Step delay (ms)</label>
          <input id="dimDelay" type="number" min="0" step="10" value="120" style="width: 90px" />
        </div>
      </div>

      <div id="toast">Saved</div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
